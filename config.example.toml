# Synapse configuration
# Copy to ~/.config/synapse/config.toml and customize

[general]
# socket_path = "/tmp/synapse.sock"     # auto-detected if omitted
max_suggestion_length = 200             # truncate long suggestions
accept_key = "right-arrow"              # or "tab"
log_level = "warn"                      # "error" | "warn" | "info" | "debug" | "trace"

[history]
enabled = true
max_entries = 50000
fuzzy = true                            # enable fuzzy matching when prefix fails

[context]
enabled = true
scan_depth = 3                          # max levels to walk up (ignored inside git repos)

[spec]
enabled = true
auto_generate = true                   # auto-generate specs from project files
generator_timeout_ms = 500             # max time for generator commands
max_list_results = 10                  # max items in dropdown list
trust_project_generators = false       # allow .synapse/specs/ generators to run shell commands

[weights]
# Weights are normalized to sum to 1.0
history = 0.30
context = 0.15
spec = 0.35
recency = 0.20

[security]
scrub_paths = true                      # redact home directory in API payloads
scrub_env_keys = ["*_KEY", "*_SECRET", "*_TOKEN", "*_PASSWORD", "*_CREDENTIALS"]
command_blocklist = ["export *=", "curl -u", "curl -H \"Authorization\""]

[logging]
interaction_log = "~/.local/share/synapse/interactions.jsonl"
max_log_size_mb = 50                    # rotate after this size
